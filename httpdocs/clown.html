<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Balloon</title>
	<link rel="stylesheet" href="scenes.css">
	<link rel="stylesheet" href="story.css">
	<link href='https://fonts.googleapis.com/css?family=Indie+Flower' rel='stylesheet' type='text/css'>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script>
</head>
<body>
	<div class="background clown">
		<header>
			<div class="story">
				<h1>Balloon</h1>
					<p>Doffe geluiden bonken door je hoofd. De geluiden worden steeds harder en harder. Het klinkt of er honderden vliegjes door je hele hoofd heen vliegen en continu tegen je slaap aan botsen. Je schrikt wakker, kijkt geschokt om je heen. ‘Welkom <span class="name"></span>&nbsp;<span class="ln"></span>, welkom in ons pretpark!’ Je kijkt ruw om je heen waar het geluid vandaan komt. Verderop staat een clown vrolijk naar je te zwaaien met een ballon in zijn hand. Wanneer je dichter bij de clown komt zet hij een brede grijns op. ‘Do you want a balloon?’ vraagt hij met een scherpe, enge stem. Om je heen liggen vreemde, scherpe voorwerpen. Wat ga je doen?</p>
			</div>
		</header>

		<div class="main-content"></div>

		<footer>
			<ul>
				<li><a><button onclick="avgrund.activate( 'stack', '.popup1' );">De clown ziet er betrouwbaar uit en je pakt de ballon aan.</button></a></li>


				<li><a href="ghosthouse.html">Die lach en stem van de clown geeft je een naar gevoel, je besluit het huis in te rennen</a></li>

				<li><a><button onclick="avgrund.activate( 'stack', '.popup2' );">Die lach en stem van de clown geeft je een naar gevoel, je besluit het huis in te rennen</button></a></li>
			</ul>
		</footer>
	</div>

<div class="avgrund-cover"></div>

	<aside class="avgrund-popup popup1">
    	<p>Je nadert de clown met een lach op je gezicht. Die ballon is mooi rond en dwarrelt een beetje in de wind. Net wanneer je je arm uitsteekt om het touwtje te pakken voel je iets om je pols heen geklemd worden. Je verstijft en trekt wit weg van schrik. Langzaam draai je je hoofd naar je pols. Een grote witte handschoen die je vasthoudt is te zien. Je draait je hoofd langzaam weer naar voren. De lach van de clown is veranderd in een hele enge grijns die alsmaar breder wordt. Je voelt iets pijnlijks in je buik en vervolgens een warme vloeistof. Alles wordt langzaam zwart voor je ogen en je zakt weg. Alles wat je nog ziet is de brede grijns van de clown en jouw ballon die wegwaait in de wind. Daarna wordt het zwart.</p>
    	<button class="popupbtn" onclick="avgrund.deactivate(window.activePopup);">Ga terug</button>
  	</aside>

  	<aside class="avgrund-popup popup2">
   		<p>Je dwarrelt wat rond langs alle glimmende voorwerpen. Er ligt van alles op de grond. Messen, kogelhulzen, vorken, zelfs een hoefijzer. De clown lacht nog steeds heel eng naar je en je besluit dat je van hem af moet om die ballon te pakken. Er liggen kogels maar geen pistool. Je besluit om het mes te pakken. Ondanks dat je het zo voorzichtig mogelijk probeert te pakken, zonder dat de clown het door heeft, voel je een scherpe pijn door je ruggenwervels heen schieten. Een glimmend puntje steekt door je buik naar voren en schiet daarna meteen naar achteren. Je wordt duizelig en valt op de grond. Het laatste wat je ziet is de brede grijns van de clown en de ballon die wegwaait in de wind. Daarna wordt het zwart.</p>
    	<button class="popupbtn" onclick="avgrund.deactivate(window.activePopup);">Ga terug</button>
  </aside>



<!-- Local storage -->
	<script>
		function replaceAll(elSelector, replacement){
			$(elSelector).each(function(index, el){
				$(el).text(replacement);
			});
		}

		var name = localStorage.getItem('fn');
		replaceAll('.name', name);

		var ln = localStorage.getItem('nm');
		replaceAll('.ln', ln);


		var bd = localStorage.getItem('bd');
		replaceAll('.bd', bd);
	</script>

	  <script>
  (function(){

  var container = document.documentElement,
    cover = document.querySelector( '.avgrund-cover' ),
    currentState = null;
  window.activePopup = null;

  addClass( container, 'avgrund-ready' );

  // Deactivate on ESC
  function onDocumentKeyUp( event ) {
    if( event.keyCode === 27 ) {
      deactivate(window.activePopup);
    }
  }

  // Deactivate on click outside
  function onDocumentClick( event ) {
    if( event.target === cover ) {
      deactivate(window.activePopup);
    }
  }

  function activate( state, popupSelector ) {
    var popup = document.querySelector(popupSelector);
    document.addEventListener( 'keyup', onDocumentKeyUp, false );
    document.addEventListener( 'click', onDocumentClick, false );

    removeClass( popup, currentState );
    addClass( popup, 'no-transition' );
    addClass( popup, state );
    addClass( popup, 'active');

    window.activePopup = popup;

    setTimeout( function() {
      removeClass( popup, 'no-transition' );
      addClass( container, 'avgrund-active' );
    }, 0 );

    currentState = state;
  }

  function deactivate(popup) {
    document.removeEventListener( 'keyup', onDocumentKeyUp, false );
    document.removeEventListener( 'click', onDocumentClick, false );

    removeClass( popup, 'active');

    removeClass( container, 'avgrund-active' );
  }

  function disableBlur() {
    addClass( document.documentElement, 'no-blur' );
  }

  function addClass( element, name ) {
    element.className = element.className.replace( /\s+$/gi, '' ) + ' ' + name;
  }

  function removeClass( element, name ) {
    element.className = element.className.replace( name, '' );
  }

  window.avgrund = {
    activate: activate,
    deactivate: deactivate,
    disableBlur: disableBlur
  }

})();
  </script>
</body>
</html>